(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(31)},29:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(14),i=a.n(c),o=a(4),s=a(5),r=a(7),u=a(6),h=a(8),m=a(33),d=a(34),p=a(32),b=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Bienvenido "),l.a.createElement("p",null,"\xa1Saca tu vestido del closet, contribuye al mundo con la reutilizaci\xf3n!, The Dresser te ayudar\xe1."),l.a.createElement("p",null,"Gana dinero sin salir de tu casa"),l.a.createElement("p",null,"\xa1Luce siempre diferente!"))}}]),t}(n.Component),f=a(2),g=window.$,E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={contactEmail:"",contactPass:"",contactName:"",contactLastName:""},a._handleSubmit=a._handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a._handleChange=a._handleChange.bind(Object(f.a)(Object(f.a)(a))),a._handleChangePass=a._handleChangePass.bind(Object(f.a)(Object(f.a)(a))),a._handleChangeName=a._handleChangeName.bind(Object(f.a)(Object(f.a)(a))),a._handleChangeLastName=a._handleChangeLastName.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"_handleChange",value:function(e){this.setState({contactEmail:e.target.value})}},{key:"_handleChangePass",value:function(e){this.setState({contactPass:e.target.value})}},{key:"_handleChangeName",value:function(e){this.setState({contactName:e.target.value})}},{key:"_handleChangeLastName",value:function(e){this.setState({contactLastName:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.setState({contactEmail:"",contactPass:"",contactName:"",contactLastName:""}),g.ajax({url:"https://apptd.herokuapp.com/auth/signup",type:"POST",data:{email:this.state.contactEmail,password:this.state.contactPass,name:this.state.contactName,lastname:this.state.contactLastName},cache:!1,success:function(e){this.setState({contactEmail:"success",contactPass:""}),console.log("success",e),localStorage.setItem("id_token",e.token)}.bind(this),error:function(e,t,a){console.log(e,t),console.log(a),this.setState({contactEmail:"danger",contactPass:""}),console.log(this.state.contactEmail+this.state.contactPass+"fail")}.bind(this)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"contact",id:"contact"},l.a.createElement("div",{className:"filter"},l.a.createElement("h2",null,"Completa tus datos"),l.a.createElement("form",{className:"form",onSubmit:this._handleSubmit,id:"formContact"},l.a.createElement("label",null,"Nombre:"),l.a.createElement("input",{id:"formName",type:"text",placeholder:"Nombre",name:"formName",value:this.state.contactName,onChange:this._handleChangeName,required:!0}),l.a.createElement("label",null,"Apellido:"),l.a.createElement("input",{id:"formLastName",type:"text",placeholder:"Apellido",name:"formLastName",value:this.state.contactLastName,onChange:this._handleChangeLastName,required:!0}),l.a.createElement("p",null),l.a.createElement("label",null,"Correo Electr\xf3nico:"),l.a.createElement("input",{id:"formEmail",type:"email",placeholder:"Correo electr\xf3nico",name:"formEmail",value:this.state.contactEmail,onChange:this._handleChange,required:!0}),l.a.createElement("label",null,"Contrase\xf1a:"),l.a.createElement("input",{type:"password",placeholder:"Contrase\xf1a",id:"formPass",name:"formPass",value:this.state.contactPass,onChange:this._handleChangePass,required:!0}),l.a.createElement("p",null,l.a.createElement("input",{type:"submit",value:"Crear Cuenta",className:"btn--cta",id:"btn-submit"})))))}}]),t}(n.Component),v=a(16),C=a(12),j=a.n(C),O=function(){function e(t){Object(o.a)(this,e),this.domain="https://apptd.herokuapp.com",this.fetch=this.fetch.bind(this),this.login=this.login.bind(this),this.getProfile=this.getProfile.bind(this)}return Object(s.a)(e,[{key:"login",value:function(e,t){var a=this;return this.fetch("".concat(this.domain,"/auth/signin"),{method:"POST",body:JSON.stringify({email:e,password:t})}).then(function(e){return a.setToken(e.token),Promise.resolve(e)})}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return j()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){localStorage.removeItem("id_token")}},{key:"getProfile",value:function(){return j()(this.getToken())}},{key:"fetch",value:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){console.log(e),console.log(t);var a={Accept:"application/json","Content-Type":"application/json"};return this.loggedIn()&&(a.Authorization="Bearer "+this.getToken()),fetch(e,Object(v.a)({headers:a},t)).then(this._checkStatus).then(function(e){return e.json()})})},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}}]),e}(),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={contactEmail:"",contactPass:""},a._handleSubmit=a._handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a._handleChangeEmail=a._handleChangeEmail.bind(Object(f.a)(Object(f.a)(a))),a._handleChangePass=a._handleChangePass.bind(Object(f.a)(Object(f.a)(a))),a._handlePushSignup=a._handlePushSignup.bind(Object(f.a)(Object(f.a)(a))),a.Auth=new O,a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"_handleChangeEmail",value:function(e){this.setState({contactEmail:e.target.value})}},{key:"_handleChangePass",value:function(e){this.setState({contactPass:e.target.value})}},{key:"_handlePushSignup",value:function(e){this.props.history.push("/signin")}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault(),this.Auth.login(this.state.contactEmail,this.state.contactPass).then(function(e){t.props.history.replace("/")}).catch(function(e){alert(e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"contact",id:"contact"},l.a.createElement("div",{className:"filter"},l.a.createElement("h2",null,"Inicia sesi\xf3n"),l.a.createElement("form",{className:"form",onSubmit:this._handleSubmit,id:"formContact"},l.a.createElement("label",null,"Correo Electr\xf3nico:"),l.a.createElement("input",{id:"formEmail",type:"email",placeholder:"Correo electr\xf3nico",name:"formEmail",value:this.state.contactEmail,onChange:this._handleChangeEmail,required:!0}),l.a.createElement("label",null,"Contrase\xf1a:"),l.a.createElement("input",{type:"password",id:"formPass",placeholder:"Contrase\xf1a",name:"formPass",value:this.state.contactPass,onChange:this._handleChangePass,required:!0}),l.a.createElement("p",null,l.a.createElement("input",{type:"submit",value:"Iniciar Sesi\xf3n",className:"btn--cta",id:"btn-submit"})),l.a.createElement("p",null,l.a.createElement(d.a,{to:"/signup"},"Crea una cuenta")),l.a.createElement("p",null,l.a.createElement(d.a,{to:"/forgotpass"},"Olvid\xe9 mi contrase\xf1a")))))}},{key:"componentWillMount",value:function(){this.Auth.loggedIn()&&this.props.history.replace("/")}}]),t}(n.Component),_=window.$,k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={contactEmail:""},a._handleSubmit=a._handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a._handleChangeEmail=a._handleChangeEmail.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"_handleChangeEmail",value:function(e){this.setState({contactEmail:e.target.value})}},{key:"_handleSubmit",value:function(e){e.preventDefault(),this.setState({contactEmail:""}),_.ajax({type:"POST",data:{email:this.state.contactEmail},cache:!1,success:function(e){this.setState({contactEmail:"success"}),console.log("success",e),localStorage.setItem("id_token",e.token)}.bind(this),error:function(e,t,a){console.log(e,t),console.log(a),this.setState({contactEmail:"danger",contactPass:""}),console.log(this.state.contactEmail+this.state.contactPass+"fail")}.bind(this)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"contact",id:"contact"},l.a.createElement("div",{className:"filter"},l.a.createElement("h2",null,"Recupera tu contrase\xf1a"),l.a.createElement("form",{className:"form",onSubmit:this._handleSubmit,id:"formContact"},l.a.createElement("label",null,"Correo Electr\xf3nico:"),l.a.createElement("input",{id:"formEmail",type:"email",placeholder:"Correo electr\xf3nico",name:"formEmail",value:this.state.contactEmail,onChange:this._handleChangeEmail,required:!0}),l.a.createElement("p",null,l.a.createElement("input",{type:"submit",value:"Enviar correo",className:"btn--cta",id:"btn-submit"})))))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={fileName:null,loaded:0},a._handleChangeFile=a._handleChangeFile.bind(Object(f.a)(Object(f.a)(a))),a._handleUpload=a._handleUpload.bind(Object(f.a)(Object(f.a)(a))),a.uploadFile=a.uploadFile.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"_handleChangeFile",value:function(e){this.setState({fileName:e.target.files[0],loaded:0}),console.log(e.target.files[0])}},{key:"_handleUpload",value:function(e){var t=this,a=new XMLHttpRequest,n=this.state.fileName;a.open("GET","https://apptd.herokuapp.com/sign-s3-single?filename=".concat(n.name,"&filetype=").concat(n.type)),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=JSON.parse(a.responseText);t.uploadFile(n,e.signedRequest,e.url)}else alert("Could not get signed URL.")},a.send()}},{key:"uploadFile",value:function(e,t,a){var n=new XMLHttpRequest;n.open("PUT",t),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(document.getElementById("preview").src=a,document.getElementById("avatar-url").value=a):alert("Could not upload file."))},n.send(e)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Carga tus prendas"),l.a.createElement("p",null,"Im\xe1genes jpg \xf3 png"),l.a.createElement("p",{id:"status"},"Por favor selecciona un archivo"),l.a.createElement("input",{type:"file",id:"file-input",onChange:this._handleChangeFile}),l.a.createElement("img",{id:"preview",src:"/images/default.png",alt:""}),l.a.createElement("input",{type:"hidden",id:"avatar-url",name:"avatar-url",value:"/images/default.png"}),l.a.createElement("button",{onClick:this._handleUpload},"Upload"),l.a.createElement("div",null," ",Math.round(this.state.loaded,2)," %"))}},{key:"componentWillUnmount",value:function(){}}]),t}(n.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement("div",null,l.a.createElement("h1",null,"The Dresser "),l.a.createElement(d.a,{to:"/Signin"},"Iniciar Sesi\xf3n"),l.a.createElement("ul",{className:"header"},l.a.createElement("li",null,l.a.createElement(d.a,{to:"/"},"Inicio")),l.a.createElement("li",null,l.a.createElement(d.a,{to:"/signup"},"Crear Cuenta")),l.a.createElement("li",null,l.a.createElement(d.a,{to:"/uploadfiles"},"Carga tus archivos"))),l.a.createElement("div",{className:"content"},l.a.createElement(p.a,{exact:!0,path:"/",component:b}),l.a.createElement(p.a,{path:"/signup",component:E}),l.a.createElement(p.a,{path:"/signin",component:y}),l.a.createElement(p.a,{path:"/forgotpass",component:k}),l.a.createElement(p.a,{path:"/uploadfiles",component:S}))))}}]),t}(n.Component);a(29);i.a.render(l.a.createElement(N,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.7fa712b1.chunk.js.map